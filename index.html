<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CropFarm | Tap Game</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1e40af;
            --secondary: #1e3a8a;
            --accent: #00ff9d;
            --dark: #0f172a;
            --darker: #0a1122;
            --light: #e2e8f0;
            --gray: #64748b;
            --gold: #fbbf24;
            --platinum: #a5b4fc;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        
        body {
            background: var(--dark);
            color: white;
            max-width: 400px;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            padding-bottom: 85px;
            overflow-x: hidden;
        }
        
        /* –¢–û–ü –ë–ê–† –° –ë–ê–õ–ê–ù–°–û–ú */
        .top-bar {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            padding: 15px;
            border-radius: 0 0 20px 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .balance {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 5px;
            text-shadow: 0 0 10px rgba(0,255,157,0.3);
        }
        
        .rank {
            display: inline-block;
            background: rgba(255,255,255,0.1);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .rank.gold { background: linear-gradient(90deg, #fbbf24, #d97706); }
        .rank.platinum { background: linear-gradient(90deg, #a5b4fc, #6366f1); }
        
        /* –°–¢–ê–¢–ò–°–¢–ò–ö–ê */
        .stats-row {
            display: flex;
            justify-content: space-around;
            padding: 15px;
            background: rgba(255,255,255,0.03);
            margin: 10px 15px;
            border-radius: 15px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-label {
            font-size: 11px;
            color: var(--gray);
            margin-bottom: 3px;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: 700;
        }
        
        /* –ö–õ–ò–ö–ï–† */
        .clicker-section {
            text-align: center;
            margin: 20px 0;
            position: relative;
        }
        
        .clicker-circle {
            width: 220px;
            height: 220px;
            margin: 0 auto;
            background: radial-gradient(circle, var(--primary), var(--darker));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 8px solid rgba(0, 255, 157, 0.3);
            box-shadow: 
                0 0 60px rgba(0, 255, 157, 0.2),
                inset 0 0 40px rgba(0, 0, 0, 0.5);
            transition: transform 0.1s;
            position: relative;
            overflow: hidden;
        }
        
        .clicker-circle:active {
            transform: scale(0.97);
        }
        
        .clicker-circle::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, transparent 30%, rgba(0, 255, 157, 0.1) 70%);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.3; }
            100% { transform: scale(1); opacity: 0.5; }
        }
        
        .clicker-icon {
            font-size: 70px;
            z-index: 2;
        }
        
        .tap-info {
            margin-top: 10px;
            font-size: 14px;
            color: var(--gray);
        }
        
        .tap-bonus {
            position: absolute;
            font-weight: 800;
            color: var(--accent);
            font-size: 24px;
            pointer-events: none;
            animation: float 1s ease-out forwards;
            text-shadow: 0 0 10px rgba(0, 255, 157, 0.7);
            z-index: 100;
        }
        
        @keyframes float {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            100% { transform: translateY(-80px) scale(0.5); opacity: 0; }
        }
        
        /* –ö–û–ú–ë–û –°–ò–°–¢–ï–ú–ê */
        .combo-section {
            background: rgba(251, 191, 36, 0.1);
            margin: 15px;
            padding: 15px;
            border-radius: 15px;
            border: 2px solid var(--gold);
            text-align: center;
            display: none;
        }
        
        .combo-cards {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }
        
        .combo-card {
            width: 50px;
            height: 70px;
            background: linear-gradient(135deg, #1e40af, #1e3a8a);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            border: 2px solid transparent;
        }
        
        .combo-card.active {
            border-color: var(--accent);
            box-shadow: 0 0 15px var(--accent);
        }
        
        /* –ë–£–°–¢–´ */
        .boost-section {
            background: rgba(255,255,255,0.03);
            margin: 15px;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
        }
        
        .boost-bar {
            height: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .boost-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), #00ffcc);
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s;
        }
        
        /* –í–ö–õ–ê–î–ö–ò */
        .tab-content {
            display: none;
            animation: fadeIn 0.3s;
            padding: 0 15px;
            padding-bottom: 20px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--darker);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            max-width: 400px;
            margin: 0 auto;
            z-index: 1000;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--gray);
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s;
            padding: 5px;
            border-radius: 8px;
            min-width: 50px;
        }
        
        .nav-item.active {
            color: var(--accent);
            background: rgba(0, 255, 157, 0.1);
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 3px;
        }
        
        /* –ö–ù–û–ü–ö–ê –í–´–ë–û–†–ê –ë–ò–†–ñ–ò */
        .exchange-select-btn {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: 600;
            margin: 20px auto;
            display: block;
            cursor: pointer;
            font-size: 16px;
        }
        
        /* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ë–ò–†–ñ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--darker);
            width: 90%;
            max-width: 350px;
            border-radius: 20px;
            padding: 20px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        .exchange-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }
        
        .exchange-item {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px 5px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .exchange-item:hover {
            transform: translateY(-3px);
        }
        
        .exchange-item.active {
            border: 2px solid var(--accent);
            background: rgba(0,255,157,0.1);
        }
        
        /* –£–õ–£–ß–®–ï–ù–ò–Ø –ö–ê–ö –ù–ê –°–ö–†–ò–ù–ï 4 */
        .upgrade-category {
            margin-bottom: 25px;
        }
        
        .category-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 4px solid var(--accent);
        }
        
        .upgrades-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .upgrade-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(0,0,0,0.2));
            border-radius: 12px;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
        }
        
        .upgrade-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .upgrade-name {
            font-size: 13px;
            font-weight: 600;
        }
        
        .upgrade-level {
            background: var(--primary);
            color: white;
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 15px;
        }
        
        .upgrade-profit {
            font-size: 11px;
            color: var(--accent);
            margin-bottom: 8px;
        }
        
        .upgrade-cost {
            width: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            padding: 8px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .upgrade-cost:disabled {
            background: var(--gray);
            cursor: not-allowed;
        }
        
        /* –ú–ê–ô–ù–ò–ù–ì */
        .mining-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        
        .mining-card {
            background: rgba(30, 64, 175, 0.2);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
        }
        
        .mining-icon {
            font-size: 30px;
            margin-bottom: 10px;
        }
        
        .mining-name {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .mining-profit {
            font-size: 12px;
            color: var(--accent);
            margin-bottom: 10px;
        }
        
        /* FRIENDS */
        .friends-container {
            padding: 20px;
            text-align: center;
        }
        
        .referral-box {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px dashed var(--accent);
        }
        
        /* AIRDROP */
        .airdrop-container {
            text-align: center;
            padding: 20px;
        }
        
        .airdrop-timer {
            font-size: 32px;
            font-weight: 800;
            color: var(--accent);
            margin: 20px 0;
            font-family: monospace;
            letter-spacing: 2px;
        }
        
        /* –ê–ù–ò–ú–ê–¶–ò–Ø –ù–ê–ì–†–ê–î–´ */
        .reward-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            color: var(--accent);
            font-size: 32px;
            font-weight: 800;
            padding: 30px 50px;
            border-radius: 20px;
            border: 3px solid var(--accent);
            box-shadow: 0 0 50px var(--accent);
            z-index: 10000;
            animation: rewardPop 2s forwards;
        }
        
        @keyframes rewardPop {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
        }
    </style>
</head>
<body>
    <!-- –¢–û–ü –ë–ê–† –° –ë–ê–õ–ê–ù–°–û–ú –ö–ê–ö –ù–ê –°–ö–†–ò–ù–ï 6 -->
    <div class="top-bar">
        <div class="balance" id="balance">0</div>
        <div class="rank gold" id="rankDisplay">Gold</div>
    </div>
    
    <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
    <div class="stats-row">
        <div class="stat-item">
            <div class="stat-label">–ó–∞ —Ç–∞–ø</div>
            <div class="stat-value" id="perTapStat">+1</div>
        </div>
        <div class="stat-item">
            <div class="stat-label">–î–ª—è –∞–ø–∞</div>
            <div class="stat-value" id="coinsToUpgrade">1K</div>
        </div>
        <div class="stat-item">
            <div class="stat-label">–í —á–∞—Å</div>
            <div class="stat-value" id="perHourStat">0</div>
        </div>
    </div>
    
    <!-- –ö–õ–ò–ö–ï–† -->
    <div class="clicker-section">
        <div class="clicker-circle" id="clicker">
            <div class="clicker-icon">üåæ</div>
        </div>
        <div class="tap-info">–¢–∞–ø–æ–≤: <span id="tapCounter">0</span></div>
    </div>
    
    <!-- –ö–û–ú–ë–û –°–ò–°–¢–ï–ú–ê -->
    <div class="combo-section" id="comboSection">
        <h3><i class="fas fa-bolt"></i> –ö–û–ú–ë–û!</h3>
        <div class="combo-cards" id="comboCards"></div>
        <p>–°–æ–±–µ—Ä–∏ 3 –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–∞—Ä—Ç—ã –¥–ª—è +3M –º–æ–Ω–µ—Ç!</p>
        <button class="upgrade-cost" onclick="claimCombo()" id="comboBtn" disabled>–ó–∞–±—Ä–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É</button>
    </div>
    
    <!-- –ë–£–°–¢–´ -->
    <div class="boost-section">
        <div>–ë—É—Å—Ç: <span id="boostCounter">0</span>/8500</div>
        <div class="boost-bar">
            <div class="boost-fill" id="boostFill"></div>
        </div>
        <div>–ö–∞–∂–¥—ã–µ 100 —Ç–∞–ø–æ–≤ –¥–∞—é—Ç +1 –∫ –±—É—Å—Ç—É</div>
    </div>
    
    <!-- –ö–ù–û–ü–ö–ê –í–´–ë–û–†–ê –ë–ò–†–ñ–ò -->
    <button class="exchange-select-btn" onclick="openExchangeModal()">
        <i class="fas fa-exchange-alt"></i> –í—ã–±–µ—Ä–∏—Ç–µ –±–∏—Ä–∂—É
    </button>
    <div id="currentExchange" style="text-align:center;color:var(--gray);margin-bottom:15px;">–ë–∏—Ä–∂–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞</div>
    
    <!-- –í–ö–õ–ê–î–ö–ê EXCHANGE -->
    <div id="exchangeTab" class="tab-content active">
        <!-- –ë—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
    </div>
    
    <!-- –í–ö–õ–ê–î–ö–ê MINE -->
    <div id="mineTab" class="tab-content">
        <div class="category-title">–®–∞—Ö—Ç–∞</div>
        <div class="mining-grid" id="miningGrid"></div>
    </div>
    
    <!-- –í–ö–õ–ê–î–ö–ê PLAYGROUND -->
    <div id="playgroundTab" class="tab-content">
        <div class="category-title">Playground</div>
        <div class="upgrades-grid" id="playgroundGrid"></div>
    </div>
    
    <!-- –í–ö–õ–ê–î–ö–ê FRIENDS -->
    <div id="friendsTab" class="tab-content">
        <div class="friends-container">
            <h3><i class="fas fa-user-friends"></i> –î—Ä—É–∑—å—è</h3>
            <p>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ: <span id="friendsCount">0</span> –¥—Ä—É–∑–µ–π</p>
            <div class="referral-box">
                <p>–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:</p>
                <div id="referralLink" style="word-break:break-all;padding:10px;background:rgba(0,0,0,0.3);border-radius:8px;margin:10px 0;">
                    https://t.me/CropFarmBot?start=ref_000000
                </div>
                <button class="upgrade-cost" onclick="copyReferral()">
                    <i class="fas fa-copy"></i> –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                </button>
            </div>
            <div class="upgrades-grid">
                <div class="upgrade-card">
                    <div class="upgrade-name">5 –¥—Ä—É–∑–µ–π</div>
                    <div class="upgrade-profit">–û—Ç–∫—Ä—ã–≤–∞–µ—Ç Legal</div>
                    <button class="upgrade-cost" onclick="checkFriendsReward(5)" id="reward5">–ó–∞–±—Ä–∞—Ç—å +50K</button>
                </div>
                <div class="upgrade-card">
                    <div class="upgrade-name">15 –¥—Ä—É–∑–µ–π</div>
                    <div class="upgrade-profit">–û—Ç–∫—Ä—ã–≤–∞–µ—Ç Specials</div>
                    <button class="upgrade-cost" onclick="checkFriendsReward(15)" id="reward15">–ó–∞–±—Ä–∞—Ç—å +500K</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –í–ö–õ–ê–î–ö–ê EARN (–û–°–ù–û–í–ù–ê–Ø) -->
    <div id="earnTab" class="tab-content">
        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
    </div>
    
    <!-- –í–ö–õ–ê–î–ö–ê AIRDROP -->
    <div id="airdropTab" class="tab-content">
        <div class="airdrop-container">
            <h3><i class="fas fa-gift"></i> CropFarm Airdrop</h3>
            <p>–î–æ –∑–∞–ø—É—Å–∫–∞ —Ç–æ–∫–µ–Ω–∞</p>
            <div class="airdrop-timer" id="airdropTimer">23:59:59</div>
            <p>–í–∞—à —Ä–∞–Ω–≥: <span class="rank gold">Gold</span></p>
            <div style="margin:30px 0;">
                <div>–ü—Ä–æ–≥—Ä–µ—Å—Å: <span id="airdropProgress">0</span>%</div>
                <div class="boost-bar" style="margin:10px 0;">
                    <div class="boost-fill" id="airdropFill"></div>
                </div>
            </div>
            <button class="upgrade-cost" style="width:200px;" onclick="claimAirdrop()" id="airdropBtn">
                <i class="fas fa-rocket"></i> –ó–∞–ø—É—Å—Ç–∏—Ç—å
            </button>
        </div>
    </div>
    
    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –í–´–ë–û–†–ê –ë–ò–†–ñ–ò -->
    <div class="modal" id="exchangeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–í—ã–±–µ—Ä–∏—Ç–µ –±–∏—Ä–∂—É</h3>
                <button class="modal-close" onclick="closeExchangeModal()">&times;</button>
            </div>
            <div class="exchange-list" id="exchangeList"></div>
        </div>
    </div>
    
    <!-- –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ -->
    <div class="bottom-nav">
        <div class="nav-item active" data-tab="exchangeTab" onclick="switchTab('exchangeTab')">
            <div class="nav-icon"><i class="fas fa-exchange-alt"></i></div>
            <div>Exchange</div>
        </div>
        <div class="nav-item" data-tab="mineTab" onclick="switchTab('mineTab')">
            <div class="nav-icon"><i class="fas fa-hard-hat"></i></div>
            <div>Mine</div>
        </div>
        <div class="nav-item" data-tab="playgroundTab" onclick="switchTab('playgroundTab')">
            <div class="nav-icon"><i class="fas fa-gamepad"></i></div>
            <div>Playground</div>
        </div>
        <div class="nav-item" data-tab="friendsTab" onclick="switchTab('friendsTab')">
            <div class="nav-icon"><i class="fas fa-user-friends"></i></div>
            <div>Friends</div>
        </div>
        <div class="nav-item" data-tab="earnTab" onclick="switchTab('earnTab')">
            <div class="nav-icon"><i class="fas fa-coins"></i></div>
            <div>Earn</div>
        </div>
        <div class="nav-item" data-tab="airdropTab" onclick="switchTab('airdropTab')">
            <div class="nav-icon"><i class="fas fa-gift"></i></div>
            <div>AirDrop</div>
        </div>
    </div>

    <script>
        // ============ –ò–ì–†–û–í–´–ï –î–ê–ù–ù–´–ï (–ù–ê–ß–ê–õ–û –° –ù–£–õ–Ø) ============
        let game = {
            balance: 0, // –ù–ê–ß–ò–ù–ê–ï–ú –° –ù–£–õ–Ø
            taps: 0, // –ù–ê–ß–ò–ù–ê–ï–ú –° –ù–£–õ–Ø
            perTap: 1, // –ù–ê–ß–ò–ù–ê–ï–ú –° 1
            perHour: 0, // –ù–ê–ß–ò–ù–ê–ï–ú –° 0
            level: 1,
            exchange: null,
            friends: 0,
            boost: 0,
            combo: {
                cards: [],
                active: false,
                collected: 0
            },
            upgrades: {},
            mined: {}
        };

        // ============ –ë–ò–†–ñ–ò ============
        const exchanges = [
            {name: 'Binance', icon: 'üè¶'},
            {name: 'Bybit', icon: 'üöÄ'},
            {name: 'OKX', icon: '‚ö°'},
            {name: 'HTX', icon: 'üî•'},
            {name: 'Kucoin', icon: 'üî∂'},
            {name: 'Gate.io', icon: 'üö™'},
            {name: 'MEXC', icon: 'üíé'},
            {name: 'Bitget', icon: 'üõ°Ô∏è'},
            {name: 'Coinbase', icon: 'ü™ô'},
            {name: 'Kraken', icon: 'üêô'}
        ];

        // ============ –£–õ–£–ß–®–ï–ù–ò–Ø (–ö–ê–ö –ù–ê –°–ö–†–ò–ù–ï 4) ============
        const upgradesData = {
            // PR&Team
            'facebook': { name: 'Facebook Ads', category: 'pr', cost: 5000, profit: 838, level: 0, maxLevel: 10 },
            'medium': { name: 'Medium', category: 'pr', cost: 1000, profit: 83, level: 0, maxLevel: 10 },
            'instagram': { name: 'Instagram', category: 'pr', cost: 500, profit: 50, level: 0, maxLevel: 10 },
            'youtube': { name: 'YouTube', category: 'pr', cost: 6000, profit: 600, level: 0, maxLevel: 10 },
            'tiktok': { name: 'TikTok', category: 'pr', cost: 1000, profit: 100, level: 0, maxLevel: 10 },
            'influencers': { name: 'Influencers', category: 'pr', cost: 5000, profit: 270, level: 0, maxLevel: 10, requires: 10 },
            
            // Markets (–∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω–µ 4 —Å–ø—Ä–∞–≤–∞)
            'web3': { name: 'Web3 Integration', category: 'markets', cost: 10000000, profit: 19850, level: 0, maxLevel: 20 },
            'dao': { name: 'DAO', category: 'markets', cost: 7000000, profit: 7810, level: 0, maxLevel: 20 },
            'dex': { name: 'DEX', category: 'markets', cost: 11990000, profit: 60420, level: 0, maxLevel: 20 },
            'oracle': { name: 'Oracle', category: 'markets', cost: 5820000, profit: 18040, level: 0, maxLevel: 20 },
            'vesting': { name: 'Vesting Smartcontracts', category: 'markets', cost: 6550000, profit: 24170, level: 0, maxLevel: 20 },
            'launchpad': { name: 'Launchpad', category: 'markets', cost: 0, profit: 3000, level: 0, maxLevel: 20 },
            'nft_market': { name: 'NFT Marketplace', category: 'markets', cost: 12470000, profit: 40280, level: 0, maxLevel: 20 },
            'grants': { name: 'Grant for Developers', category: 'markets', cost: 15980000, profit: 80560, level: 0, maxLevel: 20 },
            'nft_meta': { name: 'NFT Metaverse', category: 'markets', cost: 6970000, profit: 23960, level: 0, maxLevel: 20 },
            'farming': { name: 'Crypto Farming', category: 'markets', cost: 12110000, profit: 53670, level: 0, maxLevel: 20 },
            'sports': { name: 'Sport Collectibles', category: 'markets', cost: 2400000, profit: 14100, level: 0, maxLevel: 20 },
            'market_making': { name: 'Market Making', category: 'markets', cost: 2720000, profit: 12080, level: 0, maxLevel: 20 },
            
            // Fan Tokens (—Å–∫—Ä–∏–Ω 9)
            'fantokens': { name: 'Fan tokens', category: 'tokens', cost: 428130, profit: 14990, level: 0, maxLevel: 20 },
            'staking': { name: 'Staking', category: 'tokens', cost: 149840, profit: 9460, level: 0, maxLevel: 20 },
            'btc_pairs': { name: 'BTC pairs', category: 'tokens', cost: 415630, profit: 1110, level: 0, maxLevel: 20 },
            'eth_pairs': { name: 'ETH pairs', category: 'tokens', cost: 217600, profit: 1000, level: 0, maxLevel: 20 },
            'top10': { name: 'Top 10 cmc pairs', category: 'tokens', cost: 80730, profit: 1430, level: 0, maxLevel: 20 },
            'gamefi': { name: 'GameFi tokens', category: 'tokens', cost: 40360, profit: 1250, level: 0, maxLevel: 20 }
        };

        // ============ –ú–ê–ô–ù–ò–ù–ì ============
        const miningData = {
            'drill': { name: '–ë—É—Ä–æ–≤–∞—è', icon: '‚õèÔ∏è', cost: 10440, profit: 838, level: 0, maxLevel: 10 },
            'excavator': { name: '–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä', icon: 'üöú', cost: 0, profit: 447, level: 0, maxLevel: 10 }
        };

        // ============ –ö–ê–†–¢–´ –î–õ–Ø –ö–û–ú–ë–û ============
        const comboCards = ['üåæ', 'üöú', '‚õèÔ∏è', 'üí∞', 'üè¶', '‚ö°'];

        // ============ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ============
        function initGame() {
            loadGame();
            initUI();
            initTelegram();
            startPassiveIncome();
            startAirdropTimer();
            updateUI();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤–∫–ª–∞–¥–∫–∏
            loadExchangeTab();
            loadMiningTab();
            loadEarnTab();
            loadPlaygroundTab();
        }

        function loadGame() {
            const saved = localStorage.getItem('cropfarm_v2');
            if (saved) {
                const data = JSON.parse(saved);
                Object.assign(game, data);
            } else {
                // –ù–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
                game.upgrades = JSON.parse(JSON.stringify(upgradesData));
                game.mined = JSON.parse(JSON.stringify(miningData));
            }
        }

        function saveGame() {
            localStorage.setItem('cropfarm_v2', JSON.stringify(game));
        }

        // ============ –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° ============
        function updateUI() {
            // –ë–∞–ª–∞–Ω—Å
            document.getElementById('balance').textContent = game.balance.toLocaleString();
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
            document.getElementById('perTapStat').textContent = `+${game.perTap}`;
            document.getElementById('coinsToUpgrade').textContent = `${(game.level * 1000).toLocaleString()}`;
            document.getElementById('perHourStat').textContent = `${game.perHour.toLocaleString()}/—á–∞—Å`;
            document.getElementById('tapCounter').textContent = game.taps.toLocaleString();
            
            // –¢–µ–∫—É—â–∞—è –±–∏—Ä–∂–∞
            if (game.exchange) {
                document.getElementById('currentExchange').textContent = `–í—ã–±—Ä–∞–Ω–∞ –±–∏—Ä–∂–∞: ${game.exchange}`;
            }
            
            // –ë—É—Å—Ç
            const boostPercent = (game.boost / 8500) * 100;
            document.getElementById('boostCounter').textContent = game.boost;
            document.getElementById('boostFill').style.width = `${boostPercent}%`;
            
            // –†–∞–Ω–≥ (–º–µ–Ω—è–µ—Ç—Å—è —Å —É—Ä–æ–≤–Ω–µ–º)
            const ranks = [
                { level: 1, name: 'Bronze', class: '' },
                { level: 5, name: 'Silver', class: '' },
                { level: 10, name: 'Gold', class: 'gold' },
                { level: 20, name: 'Platinum', class: 'platinum' },
                { level: 30, name: 'Diamond', class: '' },
                { level: 40, name: 'Master', class: '' },
                { level: 50, name: 'Grandmaster', class: '' },
                { level: 60, name: 'Legendary', class: '' }
            ];
            
            let currentRank = ranks[0];
            for (const rank of ranks) {
                if (game.level >= rank.level) {
                    currentRank = rank;
                }
            }
            
            const rankEl = document.getElementById('rankDisplay');
            rankEl.textContent = currentRank.name;
            rankEl.className = `rank ${currentRank.class}`;
            
            // –ö–æ–º–±–æ —Å–∏—Å—Ç–µ–º–∞
            if (game.combo.active && game.combo.cards.length > 0) {
                document.getElementById('comboSection').style.display = 'block';
                updateComboUI();
            } else {
                document.getElementById('comboSection').style.display = 'none';
            }
            
            // –î—Ä—É–∑—å—è
            document.getElementById('friendsCount').textContent = game.friends;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π
            updateUpgradeButtons();
            updateMiningButtons();
        }

        // ============ –ö–õ–ò–ö–ï–† ============
        document.getElementById('clicker').addEventListener('click', function(e) {
            // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–ª–∏–∫–∞
            const rect = this.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–Ω–µ—Ç
            game.balance += game.perTap;
            game.taps++;
            
            // –ë—É—Å—Ç –∫–∞–∂–¥—ã–µ 100 —Ç–∞–ø–æ–≤
            if (game.taps % 100 === 0) {
                game.boost = Math.min(game.boost + 1, 8500);
                if (game.boost === 8500) {
                    showReward('üöÄ –ë–£–°–¢ –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ô!');
                }
            }
            
            // –£—Ä–æ–≤–µ–Ω—å –∫–∞–∂–¥—ã–µ 50 —Ç–∞–ø–æ–≤
            if (game.taps % 50 === 0) {
                game.level++;
                
                // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∑–∞ —Ç–∞–ø –∫–∞–∂–¥—ã–µ 5 —É—Ä–æ–≤–Ω–µ–π
                if (game.level % 5 === 0) {
                    game.perTap++;
                    showNotification(`üí™ –°–∏–ª–∞ —Ç–∞–ø–∞ —É–≤–µ–ª–∏—á–µ–Ω–∞ –¥–æ +${game.perTap}!`);
                }
                
                // –®–∞–Ω—Å –ø–æ–ª—É—á–∏—Ç—å –∫–∞—Ä—Ç—É –¥–ª—è –∫–æ–º–±–æ (–∫–∞–∂–¥—ã–µ 10 —É—Ä–æ–≤–Ω–µ–π)
                if (game.level % 10 === 0) {
                    addComboCard();
                }
            }
            
            // –ê–Ω–∏–º–∞—Ü–∏—è +N
            const bonus = document.createElement('div');
            bonus.className = 'tap-bonus';
            bonus.textContent = `+${game.perTap}`;
            bonus.style.left = `${x}px`;
            bonus.style.top = `${y}px`;
            this.appendChild(bonus);
            
            // –£–¥–∞–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => bonus.remove(), 1000);
            
            updateUI();
            saveGame();
        });

        // ============ –ö–û–ú–ë–û –°–ò–°–¢–ï–ú–ê ============
        function addComboCard() {
            if (!game.combo.active) {
                game.combo.active = true;
                game.combo.cards = [];
                game.combo.collected = 0;
            }
            
            if (game.combo.cards.length < 3) {
                const randomCard = comboCards[Math.floor(Math.random() * comboCards.length)];
                game.combo.cards.push(randomCard);
                showNotification(`üé¥ –ü–æ–ª—É—á–µ–Ω–∞ –∫–∞—Ä—Ç–∞: ${randomCard}`);
                
                if (game.combo.cards.length === 3) {
                    checkCombo();
                }
                
                updateComboUI();
                saveGame();
            }
        }

        function updateComboUI() {
            const container = document.getElementById('comboCards');
            container.innerHTML = '';
            
            game.combo.cards.forEach((card, index) => {
                const cardEl = document.createElement('div');
                cardEl.className = 'combo-card';
                if (game.combo.collected > index) {
                    cardEl.classList.add('active');
                }
                cardEl.textContent = card;
                container.appendChild(cardEl);
            });
            
            const btn = document.getElementById('comboBtn');
            if (game.combo.collected === 3) {
                btn.disabled = false;
                btn.textContent = '–ó–∞–±—Ä–∞—Ç—å +3M –º–æ–Ω–µ—Ç!';
            } else {
                btn.disabled = true;
                btn.textContent = `–°–æ–±—Ä–∞–Ω–æ: ${game.combo.collected}/3`;
            }
        }

        function checkCombo() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ 3 –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–∞—Ä—Ç—ã
            const counts = {};
            game.combo.cards.forEach(card => {
                counts[card] = (counts[card] || 0) + 1;
            });
            
            for (const card in counts) {
                if (counts[card] === 3) {
                    game.combo.collected = 3;
                    showNotification('üéâ –ö–û–ú–ë–û! 3 –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–∞—Ä—Ç—ã!');
                    break;
                }
            }
        }

        function claimCombo() {
            if (game.combo.collected === 3) {
                game.balance += 3000000;
                showReward('+3,000,000 üí∞');
                game.combo.active = false;
                game.combo.cards = [];
                game.combo.collected = 0;
                updateUI();
                saveGame();
            }
        }

        // ============ –í–´–ë–û–† –ë–ò–†–ñ–ò ============
        function openExchangeModal() {
            const modal = document.getElementById('exchangeModal');
            const list = document.getElementById('exchangeList');
            
            list.innerHTML = '';
            exchanges.forEach(ex => {
                const item = document.createElement('div');
                item.className = `exchange-item ${ex.name === game.exchange ? 'active' : ''}`;
                item.innerHTML = `
                    <div style="font-size:24px;margin-bottom:5px;">${ex.icon}</div>
                    <div>${ex.name}</div>
                `;
                item.onclick = () => selectExchange(ex.name);
                list.appendChild(item);
            });
            
            modal.style.display = 'flex';
        }

        function closeExchangeModal() {
            document.getElementById('exchangeModal').style.display = 'none';
        }

        function selectExchange(name) {
            game.exchange = name;
            closeExchangeModal();
            
            // –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ –≤—ã–±–æ—Ä –±–∏—Ä–∂–∏
            if (!localStorage.getItem('exchange_selected')) {
                game.balance += 5000;
                showNotification('üéâ +5,000 –∑–∞ –≤—ã–±–æ—Ä –±–∏—Ä–∂–∏!');
                localStorage.setItem('exchange_selected', 'true');
            }
            
            updateUI();
            saveGame();
        }

        // ============ –ó–ê–ì–†–£–ó–ö–ê –í–ö–õ–ê–î–û–ö ============
        function loadExchangeTab() {
            const container = document.getElementById('exchangeTab');
            if (!game.exchange) {
                container.innerHTML = `
                    <div style="text-align:center;padding:40px 20px;">
                        <h3>–í—ã–±–µ—Ä–∏—Ç–µ –±–∏—Ä–∂—É –¥–ª—è –Ω–∞—á–∞–ª–∞</h3>
                        <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –±–∏—Ä–∂—É</p>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <div style="text-align:center;padding:20px;">
                        <h3>–¢–µ–∫—É—â–∞—è –±–∏—Ä–∂–∞: ${game.exchange}</h3>
                        <p>–ü—Ä–∏–±—ã–ª—å –≤ —á–∞—Å: ${game.perHour.toLocaleString()}</p>
                        <div style="margin-top:30px;">
                            <div class="upgrade-card">
                                <div class="upgrade-name">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ${game.exchange}</div>
                                <div class="upgrade-profit">–ê–∫—Ç–∏–≤–Ω–æ</div>
                                <button class="upgrade-cost" onclick="changeExchange()">–°–º–µ–Ω–∏—Ç—å –±–∏—Ä–∂—É</button>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function loadMiningTab() {
            const container = document.getElementById('miningGrid');
            container.innerHTML = '';
            
            for (const [key, data] of Object.entries(game.mined)) {
                const card = document.createElement('div');
                card.className = 'mining-card';
                card.innerHTML = `
                    <div class="mining-icon">${data.icon}</div>
                    <div class="mining-name">${data.name}</div>
                    <div class="mining-profit">+${data.profit}/—á–∞—Å</div>
                    <div style="font-size:11px;margin-bottom:10px;">–£—Ä–æ–≤–µ–Ω—å: M${data.level}</div>
                    <button class="upgrade-cost" onclick="buyMining('${key}')" id="mining_${key}">
                        ${data.level >= data.maxLevel ? '–ú–ê–ö–°' : (data.cost === 0 ? 'M 0' : data.cost.toLocaleString())}
                    </button>
                `;
                container.appendChild(card);
            }
        }

        function loadEarnTab() {
            const container = document.getElementById('earnTab');
            let html = '';
            
            // PR & Team
            html += '<div class="category-title">PR & Team</div>';
            html += '<div class="upgrades-grid">';
            for (const [key, upgrade] of Object.entries(game.upgrades)) {
                if (upgrade.category === 'pr') {
                    html += createUpgradeHTML(key, upgrade);
                }
            }
            html += '</div>';
            
            // Markets
            html += '<div class="category-title">Markets</div>';
            html += '<div class="upgrades-grid">';
            for (const [key, upgrade] of Object.entries(game.upgrades)) {
                if (upgrade.category === 'markets') {
                    html += createUpgradeHTML(key, upgrade);
                }
            }
            html += '</div>';
            
            // Fan Tokens
            html += '<div class="category-title">Fan Tokens</div>';
            html += '<div class="upgrades-grid">';
            for (const [key, upgrade] of Object.entries(game.upgrades)) {
                if (upgrade.category === 'tokens') {
                    html += createUpgradeHTML(key, upgrade);
                }
            }
            html += '</div>';
            
            container.innerHTML = html;
        }

        function loadPlaygroundTab() {
            const container = document.getElementById('playgroundGrid');
            let html = '';
            
            // –ü—Ä–∏–º–µ—Ä —É–ª—É—á—à–µ–Ω–∏–π –¥–ª—è Playground
            const playgroundUpgrades = [
                { id: 'game1', name: 'DEX', profit: 60420, cost: 11990000, level: 0 },
                { id: 'game2', name: 'Oracle', profit: 18040, cost: 5820000, level: 0 },
                { id: 'game3', name: 'NFT Market', profit: 40280, cost: 12470000, level: 0 },
                { id: 'game4', name: 'Launchpad', profit: 3000, cost: 0, level: 0 }
            ];
            
            playgroundUpgrades.forEach(upgrade => {
                html += `
                    <div class="upgrade-card">
                        <div class="upgrade-header">
                            <div class="upgrade-name">${upgrade.name}</div>
                            <div class="upgrade-level">Lvl ${upgrade.level}</div>
                        </div>
                        <div class="upgrade-profit">+${upgrade.profit}/—á–∞—Å</div>
                        <button class="upgrade-cost" onclick="buyPlayground('${upgrade.id}')">
                            ${upgrade.cost === 0 ? 'M 0' : upgrade.cost.toLocaleString()}
                        </button>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function createUpgradeHTML(key, upgrade) {
            const disabled = upgrade.requires && game.friends < upgrade.requires;
            return `
                <div class="upgrade-card ${disabled ? 'locked' : ''}">
                    ${upgrade.requires ? `<div style="position:absolute;top:5px;right:5px;background:#f59e0b;color:black;font-size:10px;padding:2px 6px;border-radius:10px;">${upgrade.requires} –¥—Ä—É–∑–µ–π</div>` : ''}
                    <div class="upgrade-header">
                        <div class="upgrade-name">${upgrade.name}</div>
                        <div class="upgrade-level">${upgrade.category === 'markets' ? 'Lvl' : 'M'}${upgrade.level}</div>
                    </div>
                    <div class="upgrade-profit">+${upgrade.profit}/—á–∞—Å</div>
                    <button class="upgrade-cost" onclick="buyUpgrade('${key}')" id="upgrade_${key}" ${disabled ? 'disabled' : ''}>
                        ${upgrade.level >= upgrade.maxLevel ? '–ú–ê–ö–°' : (upgrade.cost === 0 ? 'M 0' : upgrade.cost.toLocaleString())}
                    </button>
                </div>
            `;
        }

        // ============ –ü–û–ö–£–ü–ö–ê –£–õ–£–ß–®–ï–ù–ò–ô ============
        function buyUpgrade(key) {
            const upgrade = game.upgrades[key];
            if (!upgrade || upgrade.level >= upgrade.maxLevel) return;
            
            if (upgrade.requires && game.friends < upgrade.requires) {
                showNotification(`‚ùå –ù—É–∂–Ω–æ ${upgrade.requires} –¥—Ä—É–∑–µ–π!`);
                return;
            }
            
            if (game.balance >= upgrade.cost) {
                game.balance -= upgrade.cost;
                upgrade.level++;
                upgrade.cost = Math.round(upgrade.cost * 1.5);
                game.perHour += upgrade.profit;
                
                updateUI();
                loadEarnTab(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –≤–∫–ª–∞–¥–∫—É
                saveGame();
                
                showNotification(`‚úÖ ${upgrade.name} —É–ª—É—á—à–µ–Ω –¥–æ —É—Ä–æ–≤–Ω—è ${upgrade.level}!`);
                
                // –í–∏–±—Ä–∞—Ü–∏—è –µ—Å–ª–∏ –≤ Telegram
                if (window.Telegram?.WebApp?.HapticFeedback) {
                    Telegram.WebApp.HapticFeedback.impactOccurred('light');
                }
            } else {
                showNotification('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!');
            }
        }

        function buyMining(key) {
            const mining = game.mined[key];
            if (!mining || mining.level >= mining.maxLevel) return;
            
            if (game.balance >= mining.cost) {
                game.balance -= mining.cost;
                mining.level++;
                mining.cost = Math.round(mining.cost * 1.5);
                game.perHour += mining.profit;
                
                updateUI();
                loadMiningTab();
                saveGame();
                
                showNotification(`‚úÖ ${mining.name} —É–ª—É—á—à–µ–Ω –¥–æ —É—Ä–æ–≤–Ω—è M${mining.level}!`);
            } else {
                showNotification('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!');
            }
        }

        function updateUpgradeButtons() {
            for (const [key, upgrade] of Object.entries(game.upgrades)) {
                const btn = document.getElementById(`upgrade_${key}`);
                if (btn) {
                    btn.disabled = game.balance < upgrade.cost || upgrade.level >= upgrade.maxLevel;
                    if (upgrade.requires && game.friends < upgrade.requires) {
                        btn.disabled = true;
                    }
                }
            }
        }

        function updateMiningButtons() {
            for (const [key, mining] of Object.entries(game.mined)) {
                const btn = document.getElementById(`mining_${key}`);
                if (btn) {
                    btn.disabled = game.balance < mining.cost || mining.level >= mining.maxLevel;
                    btn.textContent = mining.level >= mining.maxLevel ? '–ú–ê–ö–°' : 
                                    mining.cost === 0 ? 'M 0' : 
                                    mining.cost.toLocaleString();
                }
            }
        }

        // ============ –î–†–£–ó–¨–Ø ============
        function copyReferral() {
            const link = document.getElementById('referralLink').textContent;
            navigator.clipboard.writeText(link).then(() => {
                showNotification('üìã –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–≥–∞
                game.friends++;
                if (game.friends === 5) {
                    document.getElementById('reward5').disabled = false;
                }
                if (game.friends === 15) {
                    document.getElementById('reward15').disabled = false;
                }
                
                updateUI();
                saveGame();
            });
        }

        function checkFriendsReward(required) {
            if (game.friends >= required) {
                const reward = required === 5 ? 50000 : 500000;
                game.balance += reward;
                showNotification(`üéâ +${reward.toLocaleString()} –∑–∞ ${required} –¥—Ä—É–∑–µ–π!`);
                
                if (required === 5) {
                    document.getElementById('reward5').disabled = true;
                    document.getElementById('reward5').textContent = '–ü–æ–ª—É—á–µ–Ω–æ';
                } else {
                    document.getElementById('reward15').disabled = true;
                    document.getElementById('reward15').textContent = '–ü–æ–ª—É—á–µ–Ω–æ';
                }
                
                updateUI();
                saveGame();
            } else {
                showNotification(`‚ùå –ù—É–∂–Ω–æ ${required} –¥—Ä—É–∑–µ–π!`);
            }
        }

        // ============ AIRDROP ============
        function startAirdropTimer() {
            function updateTimer() {
                const now = new Date();
                const target = new Date(now);
                target.setHours(23, 59, 59, 999);
                
                const diff = target - now;
                const hours = Math.floor(diff / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                document.getElementById('airdropTimer').textContent = 
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Ç–∞–ø–∞–º
                const progress = Math.min(Math.floor(game.taps / 10000) * 10, 100);
                document.getElementById('airdropProgress').textContent = progress;
                document.getElementById('airdropFill').style.width = `${progress}%`;
                
                if (progress >= 100) {
                    document.getElementById('airdropBtn').disabled = false;
                }
            }
            
            updateTimer();
            setInterval(updateTimer, 1000);
        }

        function claimAirdrop() {
            const progress = Math.min(Math.floor(game.taps / 10000) * 10, 100);
            if (progress >= 100) {
                const reward = 5000000;
                game.balance += reward;
                showReward(`+${reward.toLocaleString()} üéÅ`);
                document.getElementById('airdropBtn').disabled = true;
                updateUI();
                saveGame();
            } else {
                showNotification('‚ùå –ü—Ä–æ–≥—Ä–µ—Å—Å –º–µ–Ω–µ–µ 100%!');
            }
        }

        // ============ –ü–ê–°–°–ò–í–ù–´–ô –î–û–•–û–î ============
        function startPassiveIncome() {
            setInterval(() => {
                const hourlyIncome = game.perHour;
                const perSecond = hourlyIncome / 3600;
                game.balance += perSecond;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
                document.getElementById('balance').textContent = Math.floor(game.balance).toLocaleString();
                saveGame();
            }, 1000);
        }

        // ============ –£–¢–ò–õ–ò–¢–´ ============
        function showNotification(text) {
            // –í—Ä–µ–º–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.textContent = text;
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.9);
                color: white;
                padding: 15px 25px;
                border-radius: 15px;
                z-index: 10000;
                font-weight: bold;
                box-shadow: 0 0 30px rgba(0,255,157,0.5);
                border: 2px solid var(--accent);
                animation: fadeInOut 2s;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 2000);
        }

        function showReward(text) {
            const reward = document.createElement('div');
            reward.className = 'reward-animation';
            reward.textContent = text;
            document.body.appendChild(reward);
            
            setTimeout(() => {
                reward.remove();
            }, 2000);
        }

        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabId).classList.add('active');
            
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.tab === tabId) item.classList.add('active');
            });
            
            localStorage.setItem('lastTab', tabId);
        }

        // ============ TELEGRAM ============
        function initTelegram() {
            if (window.Telegram?.WebApp) {
                const tg = Telegram.WebApp;
                tg.expand();
                tg.setHeaderColor('#1e40af');
                tg.setBackgroundColor('#0f172a');
                tg.ready();
                
                // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                if (tg.initDataUnsafe?.user) {
                    const user = tg.initDataUnsafe.user;
                    document.getElementById('referralLink').textContent = 
                        `https://t.me/CropFarmBot?start=ref_${user.id}`;
                }
            }
        }

        // ============ –ó–ê–ü–£–°–ö ============
        window.onload = initGame;
        
        // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É
        const lastTab = localStorage.getItem('lastTab') || 'exchangeTab';
        switchTab(lastTab);
    </script>
</body>
</html>
